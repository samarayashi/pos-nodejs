<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.min.js"
        integrity="sha384-qlmct0AOBiA2VPZkMY3+2WqkHtIQ9lSdAsAn5RUJD/3vA5MKDgSGcdmIv4ycVxyn"
        crossorigin="anonymous"></script>
    <style>
        body,
        html {
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: "Comic Sans MS", "Microsoft JhengHei";
            color: #333;
        }

        #outer_container {
            display: flex;
            height: 100%;
            flex-direction: row;
            justify-content: space-between;
            align-items: flex-start;
        }

        #order_area_container {
            flex: 1 0 500px;
        }

        #detail_area_container {
            flex: 1 1 500px;
            background-color: #EAF0ED;
        }

        #check_area_container {
            flex: 1 0 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            overflow-y: scroll;
            /* overflow-y: overlay; */
            /* overflow-y: auto; */
        }

        .order_table {
            border-collapse: collapse;
            border: 1px solid black;

        }

        .order_table tr {
            border: 1px solid #000;
            padding: 15px;
        }

        .detail_table td {
            padding-right: 5px;
        }

        .check_table {
            border: 1px solid black;
            border-collapse: collapse;
            margin: 10px;
            padding: 5px;
        }

        .check_table:hover {
            color: #fc3ac2;
        }

        .check_table tr {
            border: 1px dashed black;
        }

        .checked_table {
            background-color: gray;
        }
    </style>
</head>

<body>
    <div id="outer_container">
        <div id="order_area_container">
            <div>當前時間</div>
            <div id="datebox"></div>
            <div id="timebox"></div><br>
            <form id="order_form" action="" method="GET">
                <table class="order_table">
                    <tr>
                        <td>單號:<span id="sheet_number" name='sheet_number'>1</span></td>
                    </tr>
                    <tr>
                        <td>
                            熱狗堡:
                        </td>
                        <td>
                            <input type="radio" id='first_hot_dog_fort' name="hot_dog_fort" value="0" checked>0
                            <input type="radio" name="hot_dog_fort" value="1">1
                            <input type="radio" name="hot_dog_fort" value="2">2
                            <input type="radio" name="hot_dog_fort" value="3">3
                            <input type="radio" name="hot_dog_fort" value="4">4
                            <input type="radio" name="hot_dog_fort" value="5">5
                            <input type="radio" name="hot_dog_fort" value="6">6
                            <input type="radio" name="hot_dog_fort" value="7">7
                            <input type="radio" name="hot_dog_fort" value="8">8
                            <input type="radio" name="hot_dog_fort" value="9">9
                        </td>
                    </tr>
                    <tr>
                        <td>
                            裹粉熱狗:
                        </td>
                        <td>
                            <input type="radio" id='first_normal_hot_dog' name="normal_hot_dog" value="0" checked>0
                            <input type="radio" name="normal_hot_dog" value="1">1
                            <input type="radio" name="normal_hot_dog" value="2">2
                            <input type="radio" name="normal_hot_dog" value="3">3
                            <input type="radio" name="normal_hot_dog" value="4">4
                            <input type="radio" name="normal_hot_dog" value="5">5
                            <input type="radio" name="normal_hot_dog" value="6">6
                            <input type="radio" name="normal_hot_dog" value="7">7
                            <input type="radio" name="normal_hot_dog" value="8">8
                            <input type="radio" name="normal_hot_dog" value="9">9
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            薯條熱狗:
                        </td>
                        <td>
                            <input type="radio" id="first_french_fries_dog" name="french_fries_dog" value="0" checked>0
                            <input type="radio" name="french_fries_dog" value="1">1
                            <input type="radio" name="french_fries_dog" value="2">2
                            <input type="radio" name="french_fries_dog" value="3">3
                            <input type="radio" name="french_fries_dog" value="4">4
                            <input type="radio" name="french_fries_dog" value="5">5
                            <input type="radio" name="french_fries_dog" value="6">6
                            <input type="radio" name="french_fries_dog" value="7">7
                            <input type="radio" name="french_fries_dog" value="8">8
                            <input type="radio" name="french_fries_dog" value="9">9
                        </td>
                    </tr>
                </table>
                <div>總金額：<span id="price_show"></span></div>
                <div><input id="order_submit" type="submit" name="order_submit" value="確認訂單"></div>

            </form>
        </div>
        <div id="detail_area_container">
            <div>訂單詳細內容</div><br>
            <div>
                <table class="detail_table">
                    <tr>
                        <td>單號: 00</td>
                    </tr>
                    <tr>
                        <td>熱狗堡:</td>
                        <td>番茄:0</td>
                        <td>芥末:0</td>
                        <td>海苔:0</td>
                    </tr>
                    <tr>
                        <td>果粉熱狗:</td>
                        <td>番茄:0</td>
                        <td>芥末:0</td>
                        <td>海苔:0</td>
                    </tr>
                    <tr>
                        <td>薯條熱狗:</td>
                        <td>番茄:0</td>
                        <td>芥末:0</td>
                        <td>海苔:0</td>
                    </tr>
                </table>
            </div>

        </div>
        <div id="check_area_container">
            <div>查詢單號</div>
            <div>手頭總單數：</div>
            <table class="check_table">
                <tr>
                    <td>單號</td>
                    <td>00</td>
                </tr>
                <tr>
                    <td>金額</td>
                    <td>00</td>
                </tr>
            </table>
        </div>
    </div>


</body>
<script>
    var sheet_number = 1
    var total_price = 0
    var hot_dog_fort_number
    var normal_hot_dog_number
    var french_fries_dog_number

    function ShowTime() {
        var NowDate = new Date();
        var year = NowDate.getFullYear();
        var month = NowDate.getMonth();
        var day = NowDate.getDate();
        var hour = NowDate.getHours();
        var minute = NowDate.getMinutes();
        var sec = NowDate.getSeconds();
        document.getElementById('datebox').innerHTML = year + '年' + month + '月' + day + '日';
        document.getElementById('timebox').innerHTML = hour + '時' + minute + '分' + sec + '秒';
        setTimeout('ShowTime()', 1000);
    }

    function get_total_price() {
        var purchase_items = $(':checked')
        var price_dict = {
            hot_dog_fort_price: 10,
            normal_hot_dog_price: 20,
            french_fries_dog_price: 30,
        }

        total_price = 0
        for (var item of purchase_items) {
            total_price += item.value * price_dict[item.name + '_price']
        }
        $("#price_show").text(total_price)
    }

    function update_serial_number() {
        sheet_number = sheet_number + 1;
        $('#sheet_number').text(sheet_number);
    }

    function add_check_table() {
        let template = `<table class="check_table">
                <tr>
                    <td>單號</td>
                    <td>${sheet_number}</td>
                </tr>
                <tr>
                    <td>金額</td>
                    <td>${total_price}</td>
                </tr>
            </table>`
        $("#check_area_container table:last-child").after(template);

    }

    function show_order_detail() {
        let template = ` <tr>
                        <td>單號:${sheet_number}</td>
                    </tr>
                    <tr>
                        <td>熱狗堡:</td>
                        <td>番茄:0</td>
                        <td>芥末:0</td>
                        <td>海苔:0</td>
                    </tr>
                    <tr>
                        <td>果粉熱狗:</td>
                        <td>番茄:0</td>
                        <td>芥末:0</td>
                        <td>海苔:0</td>
                    </tr>
                    <tr>
                        <td>薯條熱狗:</td>
                        <td>番茄:0</td>
                        <td>芥末:0</td>
                        <td>海苔:0</td>
                    </tr>`
        $('.detail_table').empty()
            .prepend(template);
    }

    function reset_form() {
        $("#first_hot_dog_fort").prop("checked", true);
        $("#first_normal_hot_dog").prop("checked", true);
        $("#first_french_fries_dog").prop("checked", true);
        $("#price_show").text(0);
    }

    function mount_ajaxForm() {
        $('#order_form').ajaxForm(function () {
            add_check_table()
            update_serial_number()
            reset_form()
        });
    }
    $(function () {
        $('#check_area_container').css('height', window.innerHeight * 0.9)
        $('table input').on('click', get_total_price)
        $('#check_area_container').on('click', '.check_table', function () { $(this).toggleClass('checked_table') })
        $('#check_area_container').on('click', '.check_table', show_order_detail)
        ShowTime()
        mount_ajaxForm()
        show_order_detail()
    })
</script>

</html>